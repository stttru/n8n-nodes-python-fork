# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –¥–≤—É—Ö –∑–∞–¥–∞—á –≤ n8n Python Function node:

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –û—à–∏–±–∫–∞ "name 'true' is not defined" –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
2. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ output.json –≤ —Ä–µ–∂–∏–º–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∫—Ä–∏–ø—Ç–∞

## üîß –ü—Ä–æ–±–ª–µ–º–∞ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- JavaScript –±—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `true`/`false` –Ω–∞–ø—Ä—è–º—É—é –≤—Å—Ç–∞–≤–ª—è–ª–∏—Å—å –≤ Python –∫–æ–¥
- Python –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç `true`/`false` (—Ç—Ä–µ–±—É–µ—Ç `True`/`False`)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è "name 'true' is not defined"

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `convertToPythonValue()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤:

```typescript
function convertToPythonValue(value: unknown): string {
    if (value === null) return 'None';
    if (typeof value === 'boolean') return value ? 'True' : 'False';
    if (typeof value === 'undefined') return 'None';
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **–§–∞–π–ª**: `nodes/PythonFunction/PythonFunction.node.ts`
- **–§—É–Ω–∫—Ü–∏—è**: `convertToPythonValue()` (—Å—Ç—Ä–æ–∫–∏ 2629-2668)
- **–ó–∞–º–µ–Ω—ã**: –í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `JSON.stringify()` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `convertToPythonValue()`
- **–ú–µ—Å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - Legacy –æ–±—ä–µ–∫—Ç—ã
  - –§–∞–π–ª–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Unit —Ç–µ—Å—Ç**: `tests/unit/test_python_value_conversion.py`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 5/5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –ë—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, null, undefined, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã

## üÜï –ü—Ä–æ–±–ª–µ–º–∞ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ output.json –≤ —Ä–µ–∂–∏–º–µ —ç–∫—Å–ø–æ—Ä—Ç–∞

### –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª `output.json` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ "Export Script"

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createOutputJsonBinary()` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JSON —Ñ–∞–π–ª–∞:

```typescript
function createOutputJsonBinary(outputData: IDataObject, filename = 'output.json'): { [key: string]: unknown } {
    const outputJsonContent = {
        timestamp: new Date().toISOString(),
        execution_results: outputData,
        export_info: {
            description: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python —Å–∫—Ä–∏–ø—Ç–∞ –∏–∑ n8n",
            format_version: "1.0",
            exported_at: new Date().toISOString(),
            node_type: "n8n-nodes-python.pythonFunction"
        }
    };
    // ... –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64 binary
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **–§–∞–π–ª**: `nodes/PythonFunction/PythonFunction.node.ts`
- **–§—É–Ω–∫—Ü–∏—è**: `createOutputJsonBinary()` (—Å—Ç—Ä–æ–∫–∏ 3522-3547)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ –º–µ—Å—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∫—Ä–∏–ø—Ç–∞:
  - `executeOnce()` - —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  - `executeOnce()` - –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - `executeOnce()` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
  - `executePerItem()` - –≤—Å–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ output.json
```json
{
  "timestamp": "2025-06-05T16:53:00.000Z",
  "execution_results": {
    "exitCode": 0,
    "success": true,
    "stdout": "...",
    "stderr": "",
    "parsed_stdout": {...},
    "parsing_success": true,
    "executedAt": "...",
    "inputItemsCount": 1,
    "executionMode": "once"
  },
  "export_info": {
    "description": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python —Å–∫—Ä–∏–ø—Ç–∞ –∏–∑ n8n",
    "format_version": "1.0",
    "exported_at": "2025-06-05T16:53:00.000Z",
    "node_type": "n8n-nodes-python.pythonFunction"
  }
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Unit —Ç–µ—Å—Ç**: `tests/unit/test_output_json_export.py`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 4/4 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, binary —Ñ–æ—Ä–º–∞—Ç, –¥–≤–æ–π–Ω–æ–π —ç–∫—Å–ø–æ—Ä—Ç

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è README.md
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "Export Script Mode (v1.14.5+)"
- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ output.json
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã
- **Export Script Mode**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–≤—É—Ö —Ñ–∞–π–ª–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞
- **Benefits of Export Mode**: –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **Output Structure**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Unit —Ç–µ—Å—Ç—ã
```
‚úÖ PASS test_credentials (0.04s)
‚úÖ PASS test_environment_vars (0.22s)
‚úÖ PASS test_extract_code_template (0.12s)
‚úÖ PASS test_new_credentials (0.17s)
‚úÖ PASS test_output_json_export (0.08s)
‚úÖ PASS test_python_value_conversion (0.12s)
‚úÖ PASS test_script_generation (0.26s)
‚úÖ PASS test_variable_injection (0.08s)

üìä UNIT Summary: 8/8 passed (1.08s)
üìä Success Rate: 100.0%
```

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
- **TypeScript**: –£—Å–ø–µ—à–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- **Gulp**: –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ì–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–æ–¥ –≤ `dist/`

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚úÖ –†–ï–®–ï–ù–ê
- ‚ùå **–ë—ã–ª–æ**: JavaScript `true`/`false` ‚Üí Python –æ—à–∏–±–∫–∞
- ‚úÖ **–°—Ç–∞–ª–æ**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Python `True`/`False`
- üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Output.json ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –§–∞–π–ª `output.json` –≤ —Ä–µ–∂–∏–º–µ —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ **–°–æ–¥–µ—Ä–∂–∏—Ç**: –ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –£—Å–ø–µ—à–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—à–∏–±–∫–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–±–æ–∏
- üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å –±—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
2. **–£–¥–æ–±—Å—Ç–≤–æ**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
3. **–û—Ç–ª–∞–¥–∫–∞**: –£–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ì–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ –∏ –æ–±–º–µ–Ω–∞
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üì¶ –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `nodes/PythonFunction/PythonFunction.node.ts` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `tests/unit/test_python_value_conversion.py` - —Ç–µ—Å—Ç—ã –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `tests/unit/test_output_json_export.py` - —Ç–µ—Å—Ç—ã output.json

### –í–µ—Ä—Å–∏—è
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è**: 1.14.5
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 5 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ 100% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ 